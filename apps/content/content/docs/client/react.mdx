---
title: React
description: Fully typed client for React JS with TanStack Query
---

## Installation

```package-install
npm i @orpc/client @orpc/react @tanstack/react-query
```

## Setup

```tsx
import { createORPCReact } from '@orpc/react'
import { createORPCClient } from '@orpc/client'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { useState } from 'react'
import type { router } from './app-router-or-contract-router'

export const { orpc, ORPCContext } = createORPCReact<typeof router>()

export function ORPCProvider({ children }: { children: React.ReactNode }) {
    const [client] = useState(() => createORPCClient<typeof router>({
        baseURL: 'http://localhost:2026',
    }))
    const [queryClient] = useState(() => new QueryClient())

    return (
        <QueryClientProvider client={queryClient}>
            <ORPCContext.Provider value={{ client, queryClient }}>
                {/* If you has own QueryClientProvider please put it here*/}
                {children}
            </ORPCContext.Provider>
        </QueryClientProvider>
    )
}
```

The `client` is exactly the same as the [vanilla client](/docs/client/vanilla). 
You can create it globally or in a component based on your needs.

## Usage

```tsx
import { orpc } from './provider'

export function MyComponent() {
    const { data, status } = orpc.ping.useQuery({ name: 'dinwwwh' })

    return (
        <div>
            {status === 'loading' && 'Loading...'}
            {status === 'success' && <div>Data: {data}</div>}
            {status === 'error' && <div>Error: {error.message}</div>}
        </div>
    )
}
```

`useMutation` and other APIs are exactly the same; we just wrap [TanStack Query](https://tanstack.com/query/latest).
However, oRPC will manage the `query key` and `function` for you, providing the best developer experience.

## Use Infinite Query

To use `useInfiniteQuery`, the procedure must have a `cursor` input field (with any type).

```tsx
const router = {
    user: {
        list: orpc
        .input(z.object({ cursor: z.number(), limit: z.number() }))
        .handler((input) => {
            return {
                nextCursor: input.cursor + input.limit,
                users: []
            }
        })
    }
}

export function MyComponent() {
    const query = orpc.user.list.useInfiniteQuery(
        {
            limit: 10
        }, {
            getNextPageParam: (lastPage) => lastPage.nextCursor,
            initialPageParam: 0,
        })

    return (
        <div>
            {query.status === 'loading' && 'Loading...'}
            {query.status === 'success' && <div>Data: {query.data}</div>}
            {query.status === 'error' && <div>Error: {query.error.message}</div>}
        </div>
    )
}
```

Again, oRPC `useInfiniteQuery` just wraps [TanStack Query](https://tanstack.com/query/latest). 
However, oRPC will manage the `query key` and `function` for you, providing the best developer experience.

> **Note:** The React client is still in progress. We will add more features in the future.

## Utils

```ts
const utils = orpc.useUtils()

utils.user.invalidate()
// ...
```

## Use Queries

```ts
const queries = orpc.useQueries((o) => {
    return [
        o.user.find({ id: '123' }),
        o.user.list({}),
    ]
})
```

## Use Context

```ts
const {client, queryClient} = orpc.useContext()

const user = await client.user.find({ id: '123' })
```

## Others

oRPC React is well tested, it provides up to 30+ wrapper TanStack Query APIs. Please install and tinker with it.